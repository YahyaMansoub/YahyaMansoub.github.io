<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>CarLand - Car Rental Management</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="global-styles.css">
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4-LzX3a8Zq9K-Y6ZrF4yJnXm8GtQ5fW1&callback=initMap" async defer></script>
			<style>
				/* Mobile-first variables and base styles */
				:root{--bg:#f6f8fa;--card:#fff;--accent:#1e88e5;--danger:#e53935;--success:#4caf50;--warning:#ff9800}
				*{box-sizing:border-box}
				html,body{height:100%}
				body{font-family:Segoe UI, Roboto, Arial, sans-serif;margin:0;background:var(--bg);color:#111;-webkit-font-smoothing:antialiased}

				/* Navbar: sticky and touch friendly */
				.navbar{background:#24292f;color:#fff;padding:14px 16px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:40}
				.navbar .left{display:flex;align-items:center;gap:10px}
				.navbar .right{display:flex;align-items:center;gap:10px}
				.navbar a{color:#fff;text-decoration:none;font-weight:700;font-size:16px;padding:8px 16px;border-radius:6px;background:var(--accent);transition:background 0.2s}
				.navbar a:hover{background:#1565c0}
				.navbar h1{margin:0;font-size:18px;font-weight:700}

				/* Container centered, with comfortable padding on small screens */
				.container{max-width:1200px;margin:12px auto;padding:12px}
				.card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(16,24,40,.06);margin-bottom:20px}

				/* Hero Section - Stunning Design */
				.hero{
					text-align:center;
					padding:var(--space-2xl) var(--space-xl);
					background:linear-gradient(135deg, rgba(59, 130, 246, 0.9) 0%, rgba(16, 185, 129, 0.9) 50%, rgba(139, 92, 246, 0.9) 100%);
					color:white;
					border-radius:var(--radius-2xl);
					margin-bottom:var(--space-2xl);
					position:relative;
					overflow:hidden;
					backdrop-filter:blur(20px);
					-webkit-backdrop-filter:blur(20px);
					border:1px solid rgba(255, 255, 255, 0.2);
					box-shadow:var(--shadow-2xl);
				}
				
				.hero::before{
					content:'';
					position:absolute;
					top:0;
					left:0;
					right:0;
					bottom:0;
					background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
					opacity:0.3;
				}
				
				.hero h1{
					font-size:3.5rem;
					margin:0 0 var(--space-lg) 0;
					font-weight:800;
					background:linear-gradient(135deg, #ffffff 0%, rgba(255,255,255,0.8) 100%);
					-webkit-background-clip:text;
					-webkit-text-fill-color:transparent;
					background-clip:text;
					text-shadow:0 4px 20px rgba(0,0,0,0.1);
					position:relative;
				}
				
				.hero p{
					font-size:1.25rem;
					opacity:0.95;
					font-weight:400;
					position:relative;
				}

				/* Cars Grid - Premium Layout */
				.cars-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:var(--space-xl);margin-bottom:var(--space-2xl)}

				.car-card{
					background:rgba(255, 255, 255, 0.95);
					backdrop-filter:blur(20px);
					-webkit-backdrop-filter:blur(20px);
					border:1px solid rgba(255, 255, 255, 0.2);
					border-radius:var(--radius-2xl);
					overflow:hidden;
					box-shadow:var(--shadow-xl);
					cursor:pointer;
					transition:all var(--transition-normal);
					position:relative;
				}
				
				.car-card::before{
					content:'';
					position:absolute;
					top:0;
					left:0;
					right:0;
					height:2px;
					background:linear-gradient(90deg, var(--accent), var(--info), var(--success));
					transform:scaleX(0);
					transition:transform var(--transition-normal);
				}
				
				.car-card:hover::before{
					transform:scaleX(1);
				}
				
				.car-card:hover{
					transform:translateY(-8px) scale(1.02);
					box-shadow:var(--shadow-2xl);
					background:rgba(255, 255, 255, 1);
				}

				.car-image{
					width:100%;
					height:220px;
					object-fit:cover;
					background:linear-gradient(135deg, var(--gray-100), var(--gray-200));
					transition:all var(--transition-normal);
				}
				
				.car-card:hover .car-image{
					transform:scale(1.05);
				}
				
				.car-content{
					padding:var(--space-xl);
					background:rgba(255, 255, 255, 0.9);
					backdrop-filter:blur(10px);
				}
				.car-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
				.car-name{font-size:1.1rem;font-weight:700;margin:0}
				.status-badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700;text-transform:uppercase}
				.status-available{background:#e8f5e8;color:#2e7d32}
				.status-rented{background:#fff3e0;color:#f57c00}
				.status-maintenance{background:#ffebee;color:#d32f2f}

				.car-details{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
				.car-price{font-size:1.2rem;font-weight:700;color:var(--accent)}
				.car-type{color:#666;font-size:0.9rem}

				/* Modal for car details */
				.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;overflow-y:auto}
				.modal-content{background:white;margin:20px auto;max-width:800px;border-radius:12px;position:relative}
				.modal-header{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}
				.modal-body{padding:20px}
				.close{font-size:28px;font-weight:bold;cursor:pointer;color:#aaa}
				.close:hover{color:#000}

				.modal-car-image{width:100%;max-height:300px;object-fit:cover;border-radius:8px;margin-bottom:20px}

				.car-info-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:15px;margin-bottom:20px}
				.info-item{padding:10px;background:#f8f9fa;border-radius:8px}
				.info-label{font-size:0.8rem;color:#666;text-transform:uppercase;font-weight:600}
				.info-value{font-size:1rem;font-weight:600;margin-top:4px}

				/* Calendar in modal */
				.calendar{width:100%;margin-top:20px}
				.month{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #eee;margin-bottom:15px}
				.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px}
				.calendar-day{padding:8px;text-align:center;border-radius:6px;font-size:14px;min-height:40px;display:flex;align-items:center;justify-content:center}
				.calendar-day.header{font-weight:700;background:#f8f9fa}
				.calendar-day.available{background:#e8f5e8;cursor:pointer}
				.calendar-day.available:hover{background:#c8e6c9}
				.calendar-day.booked{background:#ffebee;color:#d32f2f}
				.calendar-day.empty{opacity:0.3}

				/* Map Section */
				.map-section{background:var(--card);border-radius:12px;padding:20px;margin-bottom:30px}
				.map-container{width:100%;height:400px;background:#e0e0e0;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;font-size:1.1rem;position:relative;overflow:hidden}
				.map-placeholder{text-align:center}

				/* Car markers on map */
				.car-marker{position:absolute;width:30px;height:30px;background:var(--accent);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:12px;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.3)}
				.car-marker.available{background:var(--success)}
				.car-marker.rented{background:var(--warning)}
				.car-marker.maintenance{background:var(--danger)}

				/* Filters */
				.filters{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px;padding:20px;background:var(--card);border-radius:12px}
				.filter-btn{padding:8px 16px;border:1px solid #ddd;border-radius:20px;background:white;cursor:pointer;transition:all 0.2s}
				.filter-btn.active{background:var(--accent);color:white;border-color:var(--accent)}
				.filter-btn:hover{border-color:var(--accent)}

				/* Statistics - Modern Cards */
				.stats{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}
				
				.stat-card{
					background:rgba(255, 255, 255, 0.95);
					backdrop-filter:blur(20px);
					-webkit-backdrop-filter:blur(20px);
					border:1px solid rgba(255, 255, 255, 0.2);
					padding:var(--space-xl);
					border-radius:var(--radius-2xl);
					text-align:center;
					box-shadow:var(--shadow-xl);
					transition:all var(--transition-normal);
					position:relative;
					overflow:hidden;
				}
				
				.stat-card::before{
					content:'';
					position:absolute;
					top:0;
					left:0;
					right:0;
					height:3px;
					background:linear-gradient(90deg, var(--accent), var(--info));
				}
				
				.stat-card:hover{
					transform:translateY(-4px);
					box-shadow:var(--shadow-2xl);
				}
				
				.stat-number{
					font-size:2.75rem;
					font-weight:800;
					background:linear-gradient(135deg, var(--accent) 0%, var(--info) 100%);
					-webkit-background-clip:text;
					-webkit-text-fill-color:transparent;
					background-clip:text;
					margin-bottom:var(--space-sm);
				}
				
				.stat-label{
					color:var(--gray-600);
					font-size:0.875rem;
					text-transform:uppercase;
					font-weight:600;
					letter-spacing:1px;
				}

				/* Responsive adjustments */
				@media (max-width: 768px) {
					.navbar{flex-direction:column;gap:10px;text-align:center}
					.navbar .right{width:100%}
					.hero h1{font-size:2rem}
					.cars-grid{grid-template-columns:1fr}
					.filters{justify-content:center}
					.modal-content{margin:10px}
					.car-info-grid{grid-template-columns:1fr}
				}

				/* Animations */
				@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
				.car-card{animation:fadeIn 0.5s ease-out}
				
				/* Loading spinner */
				.spinner{border:3px solid #f3f3f3;border-top:3px solid var(--accent);border-radius:50%;width:30px;height:30px;animation:spin 1s linear infinite;margin:20px auto}
				@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
			</style>
	</head>
	<body>
		<header class="navbar">
			<div class="left">
				<h1>üöó CarLand</h1>
			</div>
			<div class="right">
				<a href="add_car.html" style="background:var(--accent);color:#fff;text-decoration:none;padding:8px 16px;border-radius:6px;font-weight:700;font-size:16px;display:inline-block">Manage Cars</a>
			</div>
		</header>

		<main class="container">
			<!-- Hero Section -->
			<section class="hero">
				<h1>Premium Car Rental Fleet</h1>
				<p>Discover our collection of luxury and economy vehicles</p>
			</section>

			<!-- Statistics -->
			<section class="stats">
				<div class="stat-card">
					<div class="stat-number" id="totalCars">12</div>
					<div class="stat-label">Total Cars</div>
				</div>
				<div class="stat-card">
					<div class="stat-number" id="availableCars">8</div>
					<div class="stat-label">Available</div>
				</div>
				<div class="stat-card">
					<div class="stat-number" id="rentedCars">3</div>
					<div class="stat-label">Rented</div>
				</div>
				<div class="stat-card">
					<div class="stat-number" id="maintenanceCars">1</div>
					<div class="stat-label">Maintenance</div>
				</div>
			</section>

			<!-- Filters -->
			<section class="filters">
				<button class="filter-btn active" data-filter="all">All Cars</button>
				<button class="filter-btn" data-filter="available">Available</button>
				<button class="filter-btn" data-filter="rented">Rented</button>
				<button class="filter-btn" data-filter="maintenance">Maintenance</button>
				<button class="filter-btn" data-filter="luxury">Luxury</button>
				<button class="filter-btn" data-filter="economy">Economy</button>
				<button class="filter-btn" data-filter="suv">SUV</button>
			</section>

			<!-- Live Map -->
			<section class="map-section card">
				<h3 style="margin:0 0 15px 0">üó∫Ô∏è Live Car Locations</h3>
				<div id="googleMap" style="width:100%;height:400px;border-radius:8px;"></div>
				<div class="map-legend" style="display:flex;justify-content:center;gap:20px;margin-top:15px;font-size:14px;">
					<span><span style="display:inline-block;width:12px;height:12px;background:var(--success);border-radius:50%;margin-right:5px;"></span>Available</span>
					<span><span style="display:inline-block;width:12px;height:12px;background:var(--warning);border-radius:50%;margin-right:5px;"></span>Rented</span>
					<span><span style="display:inline-block;width:12px;height:12px;background:var(--danger);border-radius:50%;margin-right:5px;"></span>Maintenance</span>
				</div>
			</section>

			<!-- Cars Grid -->
			<section class="cars-grid" id="carsGrid">
				<!-- Cars will be dynamically loaded here -->
				<div class="spinner"></div>
			</section>
		</main>

		<!-- Car Detail Modal -->
		<div id="carModal" class="modal">
			<div class="modal-content">
				<div class="modal-header">
					<h2 id="modalCarName">Car Details</h2>
					<span class="close">&times;</span>
				</div>
				<div class="modal-body">
					<img id="modalCarImage" class="modal-car-image" src="" alt="Car Image"/>
					<div class="car-info-grid" id="modalCarInfo">
						<!-- Car information will be populated here -->
					</div>
					<div class="calendar card">
						<div class="month">
							<div style="font-weight:700">November 2025 - Availability Calendar</div>
						</div>
						<div class="calendar-grid" id="modalCalendar">
							<!-- Calendar will be populated here -->
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Sample car data
			const cars = [
				{
					id: 1,
					name: "BMW X5",
					type: "luxury",
					status: "available",
					price: 120,
					image: "car.jpeg",
					model: "2024 BMW X5 xDrive40i",
					year: 2024,
					fuel: "Gasoline",
					transmission: "Automatic",
					seats: 7,
					color: "Midnight Black",
					mileage: "12,500 km",
					features: ["GPS Navigation", "Leather Seats", "Sunroof", "Premium Sound"],
					location: { x: 25, y: 30 }
				},
				{
					id: 2,
					name: "Toyota Camry",
					type: "economy",
					status: "available",
					price: 65,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2023 Toyota Camry LE",
					year: 2023,
					fuel: "Hybrid",
					transmission: "CVT",
					seats: 5,
					color: "Pearl White",
					mileage: "28,200 km",
					features: ["Backup Camera", "Bluetooth", "Apple CarPlay", "Safety Sense"],
					location: { x: 60, y: 45 }
				},
				{
					id: 3,
					name: "Mercedes C-Class",
					type: "luxury",
					status: "rented",
					price: 95,
					image: "car.jpeg",
					model: "2024 Mercedes C300",
					year: 2024,
					fuel: "Gasoline",
					transmission: "9G-Tronic",
					seats: 5,
					color: "Silver Metallic",
					mileage: "8,900 km",
					features: ["MBUX Infotainment", "AMG Line", "LED Headlights", "Wireless Charging"],
					location: { x: 40, y: 70 }
				},
				{
					id: 4,
					name: "Honda CR-V",
					type: "suv",
					status: "available",
					price: 75,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2023 Honda CR-V EX",
					year: 2023,
					fuel: "Gasoline",
					transmission: "CVT",
					seats: 5,
					color: "Modern Steel",
					mileage: "15,600 km",
					features: ["All-Wheel Drive", "Honda Sensing", "Power Tailgate", "Heated Seats"],
					location: { x: 75, y: 25 }
				},
				{
					id: 5,
					name: "Audi A4",
					type: "luxury",
					status: "available",
					price: 85,
					image: "car.jpeg",
					model: "2024 Audi A4 Premium",
					year: 2024,
					fuel: "Gasoline",
					transmission: "S Tronic",
					seats: 5,
					color: "Glacier White",
					mileage: "6,200 km",
					features: ["Quattro AWD", "Virtual Cockpit", "Bang & Olufsen", "Matrix LED"],
					location: { x: 20, y: 60 }
				},
				{
					id: 6,
					name: "Ford Escape",
					type: "suv",
					status: "maintenance",
					price: 70,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2023 Ford Escape Titanium",
					year: 2023,
					fuel: "Hybrid",
					transmission: "eCVT",
					seats: 5,
					color: "Ruby Red",
					mileage: "22,100 km",
					features: ["Co-Pilot360", "SYNC 3", "Panoramic Roof", "Intelligent AWD"],
					location: { x: 85, y: 55 }
				},
				{
					id: 7,
					name: "Nissan Altima",
					type: "economy",
					status: "available",
					price: 60,
					image: "car.jpeg",
					model: "2023 Nissan Altima 2.5S",
					year: 2023,
					fuel: "Gasoline",
					transmission: "CVT",
					seats: 5,
					color: "Storm Blue",
					mileage: "31,400 km",
					features: ["ProPILOT Assist", "NissanConnect", "Remote Start", "Intelligent Keys"],
					location: { x: 50, y: 20 }
				},
				{
					id: 8,
					name: "Lexus RX",
					type: "luxury",
					status: "rented",
					price: 110,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2024 Lexus RX 350",
					year: 2024,
					fuel: "Gasoline",
					transmission: "8-Speed Automatic",
					seats: 5,
					color: "Atomic Silver",
					mileage: "9,800 km",
					features: ["Lexus Safety+", "Mark Levinson Audio", "Panoramic Roof", "Wireless Charging"],
					location: { x: 30, y: 80 }
				},
				{
					id: 9,
					name: "Chevrolet Malibu",
					type: "economy",
					status: "available",
					price: 55,
					image: "car.jpeg",
					model: "2023 Chevrolet Malibu LT",
					year: 2023,
					fuel: "Gasoline",
					transmission: "CVT",
					seats: 5,
					color: "Summit White",
					mileage: "26,700 km",
					features: ["Chevy Safety Assist", "MyLink Infotainment", "Remote Start", "Wi-Fi Hotspot"],
					location: { x: 70, y: 75 }
				},
				{
					id: 10,
					name: "Jeep Grand Cherokee",
					type: "suv",
					status: "available",
					price: 90,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2024 Jeep Grand Cherokee Limited",
					year: 2024,
					fuel: "Gasoline",
					transmission: "8-Speed Automatic",
					seats: 7,
					color: "Granite Crystal",
					mileage: "11,300 km",
					features: ["4x4 Capability", "Uconnect 5", "Advanced Safety", "Premium Interior"],
					location: { x: 45, y: 40 }
				},
				{
					id: 11,
					name: "Hyundai Elantra",
					type: "economy",
					status: "rented",
					price: 50,
					image: "car.jpeg",
					model: "2023 Hyundai Elantra SEL",
					year: 2023,
					fuel: "Gasoline",
					transmission: "CVT",
					seats: 5,
					color: "Intense Blue",
					mileage: "19,600 km",
					features: ["SmartSense Safety", "8-inch Display", "Wireless CarPlay", "Heated Seats"],
					location: { x: 65, y: 15 }
				},
				{
					id: 12,
					name: "Volvo XC90",
					type: "luxury",
					status: "available",
					price: 130,
					image: "car-transparent-bg-after-1-removebg-preview.png",
					model: "2024 Volvo XC90 T6",
					year: 2024,
					fuel: "Gasoline",
					transmission: "8-Speed Automatic",
					seats: 7,
					color: "Crystal White Pearl",
					mileage: "7,400 km",
					features: ["Pilot Assist", "Bowers & Wilkins", "Air Suspension", "360¬∞ Camera"],
					location: { x: 80, y: 65 }
				}
			];

			let filteredCars = [...cars];

			// DOM elements
			const carsGrid = document.getElementById('carsGrid');
			const modal = document.getElementById('carModal');
			const closeModal = document.querySelector('.close');
			const filterBtns = document.querySelectorAll('.filter-btn');
			const carMap = document.getElementById('carMap');

			// Google Maps integration
			let map;
			let markers = [];

			// Initialize Google Map with Premium Styling
			function initMap() {
				// Center map on a default location (you can change this to your city)
				const center = { lat: 40.7128, lng: -74.0060 }; // New York City
				
				map = new google.maps.Map(document.getElementById('googleMap'), {
					zoom: 12,
					center: center,
					mapTypeControl: false,
					streetViewControl: false,
					fullscreenControl: true,
					zoomControl: true,
					styles: [
						{
							"featureType": "all",
							"elementType": "geometry.fill",
							"stylers": [{"weight": "2.00"}]
						},
						{
							"featureType": "all",
							"elementType": "geometry.stroke",
							"stylers": [{"color": "#9c9c9c"}]
						},
						{
							"featureType": "all",
							"elementType": "labels.text",
							"stylers": [{"visibility": "on"}]
						},
						{
							"featureType": "landscape",
							"elementType": "all",
							"stylers": [{"color": "#f2f2f2"}]
						},
						{
							"featureType": "landscape",
							"elementType": "geometry.fill",
							"stylers": [{"color": "#ffffff"}]
						},
						{
							"featureType": "landscape.man_made",
							"elementType": "geometry.fill",
							"stylers": [{"color": "#ffffff"}]
						},
						{
							"featureType": "poi",
							"elementType": "all",
							"stylers": [{"visibility": "off"}]
						},
						{
							"featureType": "road",
							"elementType": "all",
							"stylers": [{"saturation": -100}, {"lightness": 45}]
						},
						{
							"featureType": "road",
							"elementType": "geometry.fill",
							"stylers": [{"color": "#eeeeee"}]
						},
						{
							"featureType": "road",
							"elementType": "labels.text.fill",
							"stylers": [{"color": "#7b7b7b"}]
						},
						{
							"featureType": "road",
							"elementType": "labels.text.stroke",
							"stylers": [{"color": "#ffffff"}]
						},
						{
							"featureType": "road.highway",
							"elementType": "all",
							"stylers": [{"visibility": "simplified"}]
						},
						{
							"featureType": "road.arterial",
							"elementType": "labels.icon",
							"stylers": [{"visibility": "off"}]
						},
						{
							"featureType": "transit",
							"elementType": "all",
							"stylers": [{"visibility": "off"}]
						},
						{
							"featureType": "water",
							"elementType": "all",
							"stylers": [{"color": "#46bcec"}, {"visibility": "on"}]
						},
						{
							"featureType": "water",
							"elementType": "geometry.fill",
							"stylers": [{"color": "#c8d7d4"}]
						},
						{
							"featureType": "water",
							"elementType": "labels.text.fill",
							"stylers": [{"color": "#070707"}]
						},
						{
							"featureType": "water",
							"elementType": "labels.text.stroke",
							"stylers": [{"color": "#ffffff"}]
						}
					]
				});

				// Add car markers to the map
				addCarMarkersToMap();
			}

			// Add car markers to Google Maps
			function addCarMarkersToMap() {
				// Clear existing markers
				markers.forEach(marker => marker.setMap(null));
				markers = [];

				cars.forEach(car => {
					// Convert percentage coordinates to actual lat/lng (adjust as needed for your area)
					const lat = center.lat + (car.location.y - 50) * 0.01;
					const lng = center.lng + (car.location.x - 50) * 0.01;

					const marker = new google.maps.Marker({
						position: { lat, lng },
						map: map,
						title: `${car.name} - ${car.status}`,
						icon: {
							path: google.maps.SymbolPath.CIRCLE,
							scale: 8,
							fillColor: getStatusColor(car.status),
							fillOpacity: 1,
							strokeColor: '#fff',
							strokeWeight: 2
						}
					});

					// Add click listener to marker
					marker.addListener('click', () => {
						window.location.href = 'car_management.html';
					});

					// Add info window
					const infoWindow = new google.maps.InfoWindow({
						content: `
							<div style="padding:10px;">
								<h4 style="margin:0 0 5px 0;">${car.name}</h4>
								<p style="margin:0;color:#666;">${car.model}</p>
								<p style="margin:5px 0 0 0;font-weight:bold;color:${getStatusColor(car.status)};">
									Status: ${car.status.charAt(0).toUpperCase() + car.status.slice(1)}
								</p>
								<p style="margin:5px 0 0 0;">$${car.price}/day</p>
							</div>
						`
					});

					marker.addListener('mouseover', () => {
						infoWindow.open(map, marker);
					});

					marker.addListener('mouseout', () => {
						infoWindow.close();
					});

					markers.push(marker);
				});
			}

			// Get color for car status
			function getStatusColor(status) {
				switch(status) {
					case 'available': return '#4caf50';
					case 'rented': return '#ff9800';
					case 'maintenance': return '#e53935';
					default: return '#1e88e5';
				}
			}

			// Initialize the app
			function init() {
				renderCars();
				updateStats();
				attachEventListeners();
			}

			// Render cars grid
			function renderCars() {
				carsGrid.innerHTML = '';
				
				if (filteredCars.length === 0) {
					carsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">No cars match the current filter</div>';
					return;
				}

				filteredCars.forEach(car => {
					const carCard = createCarCard(car);
					carsGrid.appendChild(carCard);
				});
			}

			// Create car card element
			function createCarCard(car) {
				const card = document.createElement('div');
				card.className = 'car-card';
				card.setAttribute('data-car-id', car.id);

				const statusClass = `status-${car.status}`;
				const statusText = car.status.charAt(0).toUpperCase() + car.status.slice(1);

				card.innerHTML = `
					<img src="${car.image}" alt="${car.name}" class="car-image" onerror="this.src='https://via.placeholder.com/320x200?text=${encodeURIComponent(car.name)}'"/>
					<div class="car-content">
						<div class="car-header">
							<h3 class="car-name">${car.name}</h3>
							<span class="status-badge ${statusClass}">${statusText}</span>
						</div>
						<div class="car-details">
							<span class="car-price">$${car.price}/day</span>
							<span class="car-type">${car.type.charAt(0).toUpperCase() + car.type.slice(1)}</span>
						</div>
					</div>
				`;

				card.addEventListener('click', () => window.location.href = 'car_management.html');
				return card;
			}

			// Make initMap available globally for Google Maps callback
			window.initMap = initMap;

			// Open car detail modal
			function openCarModal(car) {
				document.getElementById('modalCarName').textContent = car.name;
				document.getElementById('modalCarImage').src = car.image;
				
				// Populate car information
				const modalCarInfo = document.getElementById('modalCarInfo');
				modalCarInfo.innerHTML = `
					<div class="info-item">
						<div class="info-label">Model</div>
						<div class="info-value">${car.model}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Year</div>
						<div class="info-value">${car.year}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Fuel Type</div>
						<div class="info-value">${car.fuel}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Transmission</div>
						<div class="info-value">${car.transmission}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Seats</div>
						<div class="info-value">${car.seats}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Color</div>
						<div class="info-value">${car.color}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Mileage</div>
						<div class="info-value">${car.mileage}</div>
					</div>
					<div class="info-item">
						<div class="info-label">Price</div>
						<div class="info-value">$${car.price}/day</div>
					</div>
					<div class="info-item" style="grid-column: 1/-1;">
						<div class="info-label">Features</div>
						<div class="info-value">${car.features.join(', ')}</div>
					</div>
				`;

				// Generate calendar
				generateCalendar(car);
				
				modal.style.display = 'block';
			}

			// Generate calendar for car availability
			function generateCalendar(car) {
				const calendar = document.getElementById('modalCalendar');
				calendar.innerHTML = '';

				// Add day headers
				const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
				days.forEach(day => {
					const dayHeader = document.createElement('div');
					dayHeader.className = 'calendar-day header';
					dayHeader.textContent = day;
					calendar.appendChild(dayHeader);
				});

				// Generate November 2025 calendar
				const year = 2025, month = 10; // November (0-indexed)
				const firstDay = new Date(year, month, 1).getDay();
				const daysInMonth = new Date(year, month + 1, 0).getDate();

				// Add empty cells for days before the first day of the month
				for (let i = 0; i < firstDay; i++) {
					const emptyDay = document.createElement('div');
					emptyDay.className = 'calendar-day empty';
					calendar.appendChild(emptyDay);
				}

				// Add actual days
				for (let day = 1; day <= daysInMonth; day++) {
					const dayElement = document.createElement('div');
					dayElement.className = 'calendar-day';
					dayElement.textContent = day;
					
					// Randomly assign some days as booked for demo purposes
					if (car.status === 'rented' && (day % 7 === 0 || day % 11 === 0)) {
						dayElement.classList.add('booked');
						dayElement.title = 'Not Available';
					} else if (car.status === 'available') {
						dayElement.classList.add('available');
						dayElement.title = 'Available for booking';
					} else {
						dayElement.classList.add('booked');
						dayElement.title = 'Not Available';
					}
					
					calendar.appendChild(dayElement);
				}
			}

			// Filter cars
			function filterCars(filterType) {
				if (filterType === 'all') {
					filteredCars = [...cars];
				} else if (['available', 'rented', 'maintenance'].includes(filterType)) {
					filteredCars = cars.filter(car => car.status === filterType);
				} else {
					filteredCars = cars.filter(car => car.type === filterType);
				}
				renderCars();
			}

			// Update statistics
			function updateStats() {
				document.getElementById('totalCars').textContent = cars.length;
				document.getElementById('availableCars').textContent = cars.filter(car => car.status === 'available').length;
				document.getElementById('rentedCars').textContent = cars.filter(car => car.status === 'rented').length;
				document.getElementById('maintenanceCars').textContent = cars.filter(car => car.status === 'maintenance').length;
			}

			// Attach event listeners
			function attachEventListeners() {
				// Filter buttons
				filterBtns.forEach(btn => {
					btn.addEventListener('click', (e) => {
						filterBtns.forEach(b => b.classList.remove('active'));
						e.target.classList.add('active');
						filterCars(e.target.getAttribute('data-filter'));
					});
				});

				// Modal close
				closeModal.addEventListener('click', () => {
					modal.style.display = 'none';
				});

				// Close modal when clicking outside
				window.addEventListener('click', (e) => {
					if (e.target === modal) {
						modal.style.display = 'none';
					}
				});
			}

			// Initialize the application
			document.addEventListener('DOMContentLoaded', init);
		</script>
	</body>
</html>
