<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Add New Car - CarLand</title>
		<link rel="stylesheet" href="global-styles.css">
		<style>
			/* Page-specific styles */
			.upload-zone {
				border: 2px dashed var(--border);
				border-radius: 12px;
				padding: 40px 20px;
				text-align: center;
				background: var(--light);
				transition: all 0.3s;
				cursor: pointer;
				position: relative;
			}

			.upload-zone:hover {
				border-color: var(--accent);
				background: rgba(30, 136, 229, 0.05);
			}

			.upload-zone.dragover {
				border-color: var(--accent);
				background: rgba(30, 136, 229, 0.1);
				transform: scale(1.02);
			}

			.upload-icon {
				font-size: 48px;
				color: var(--accent);
				margin-bottom: 15px;
			}

			.file-input {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				opacity: 0;
				cursor: pointer;
			}

			.preview-container {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 15px;
				margin-top: 20px;
			}

			.preview-item {
				position: relative;
				border-radius: 8px;
				overflow: hidden;
				box-shadow: 0 4px 8px rgba(0,0,0,0.1);
				background: #fff;
			}

			.preview-image {
				width: 100%;
				height: 120px;
				object-fit: cover;
			}

			.preview-file {
				padding: 15px;
				text-align: center;
				min-height: 120px;
				display: flex;
				flex-direction: column;
				justify-content: center;
				background: var(--light);
			}

			.preview-remove {
				position: absolute;
				top: 5px;
				right: 5px;
				background: var(--danger);
				color: white;
				border: none;
				border-radius: 50%;
				width: 25px;
				height: 25px;
				cursor: pointer;
				font-size: 14px;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.exotic-section {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border-radius: 12px;
				padding: 30px;
				text-align: center;
				margin: 30px 0;
			}

			.exotic-section h3 {
				margin: 0 0 15px 0;
				font-size: 1.5rem;
			}

			.exotic-upload {
				background: rgba(255,255,255,0.9);
				color: #333;
				padding: 20px;
				border-radius: 10px;
				margin-top: 20px;
			}

			.form-section {
				background: #fff;
				border-radius: 12px;
				padding: 25px;
				margin-bottom: 25px;
				box-shadow: 0 4px 12px rgba(0,0,0,0.05);
			}

			.section-title {
				font-size: 1.3rem;
				font-weight: 700;
				margin: 0 0 20px 0;
				color: #333;
				border-bottom: 2px solid var(--accent);
				padding-bottom: 10px;
			}

			.checkbox-group {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 10px;
				margin-top: 10px;
			}

			.checkbox-item {
				display: flex;
				align-items: center;
				gap: 8px;
				padding: 8px 0;
			}

			.checkbox-item input {
				width: 18px;
				height: 18px;
				accent-color: var(--accent);
			}

			.price-input {
				position: relative;
			}

			.price-input::before {
				content: '$';
				position: absolute;
				left: 15px;
				top: 50%;
				transform: translateY(-50%);
				color: var(--text-muted);
				font-weight: 600;
			}

			.price-input input {
				padding-left: 35px;
			}

			.ai-process {
				background: var(--info);
				color: white;
				padding: 15px;
				border-radius: 8px;
				text-align: center;
				margin-top: 15px;
				display: none;
			}

			.success-message {
				background: var(--success);
				color: white;
				padding: 20px;
				border-radius: 8px;
				text-align: center;
				margin: 20px 0;
				display: none;
			}
		</style>
	</head>
	<body>
		<header class="navbar">
			<div class="left">
				<a href="main.html">‚Üê Back to Fleet</a>
				<h1>üöó Add New Car</h1>
			</div>
		</header>

		<main class="container">
			<!-- Exotic Car Upload Section -->
			<div class="exotic-section">
				<h3>üèéÔ∏è Exotic Car Quick Add</h3>
				<p>Upload a PDF with complete car information and let our AI agents create the listing automatically</p>
				<div class="exotic-upload">
					<div class="upload-zone" id="exoticUpload">
						<div class="upload-icon">üìÑ</div>
						<h4>Drop PDF file here or click to upload</h4>
						<p>AI will extract all car details from the document</p>
						<input type="file" class="file-input" id="exoticFile" accept=".pdf" />
					</div>
					<div class="ai-process" id="aiProcess">
						<div class="spinner"></div>
						<p>AI Agent processing your PDF... This may take a moment.</p>
					</div>
				</div>
			</div>

			<div style="text-align: center; margin: 30px 0; color: var(--text-muted);">
				<hr style="width: 100px; margin: 0 auto;">
				<p style="margin: 10px 0;">OR</p>
				<hr style="width: 100px; margin: 0 auto;">
			</div>

			<!-- Manual Car Entry Form -->
			<form id="carForm">
				<!-- Basic Information -->
				<div class="form-section">
					<h3 class="section-title">üöó Basic Information</h3>
					<div class="grid-2">
						<div class="form-group">
							<label class="form-label">Car Name *</label>
							<input type="text" class="form-control" id="carName" required placeholder="e.g., BMW X5">
						</div>
						<div class="form-group">
							<label class="form-label">Model *</label>
							<input type="text" class="form-control" id="carModel" required placeholder="e.g., 2024 BMW X5 xDrive40i">
						</div>
						<div class="form-group">
							<label class="form-label">Year *</label>
							<input type="number" class="form-control" id="carYear" required min="1990" max="2030" placeholder="2024">
						</div>
						<div class="form-group">
							<label class="form-label">Type *</label>
							<select class="form-select" id="carType" required>
								<option value="">Select Type</option>
								<option value="luxury">Luxury</option>
								<option value="economy">Economy</option>
								<option value="suv">SUV</option>
								<option value="sedan">Sedan</option>
								<option value="convertible">Convertible</option>
								<option value="truck">Truck</option>
								<option value="coupe">Coupe</option>
							</select>
						</div>
						<div class="form-group">
							<label class="form-label">Status *</label>
							<select class="form-select" id="carStatus" required>
								<option value="available">Available</option>
								<option value="rented">Rented</option>
								<option value="maintenance">Maintenance</option>
							</select>
						</div>
						<div class="form-group">
							<label class="form-label">Daily Rate *</label>
							<div class="price-input">
								<input type="number" class="form-control" id="carPrice" required min="1" placeholder="75">
							</div>
						</div>
					</div>
				</div>

				<!-- Technical Specifications -->
				<div class="form-section">
					<h3 class="section-title">üîß Technical Specifications</h3>
					<div class="grid-3">
						<div class="form-group">
							<label class="form-label">Fuel Type</label>
							<select class="form-select" id="fuelType">
								<option value="gasoline">Gasoline</option>
								<option value="diesel">Diesel</option>
								<option value="hybrid">Hybrid</option>
								<option value="electric">Electric</option>
								<option value="plug-in-hybrid">Plug-in Hybrid</option>
							</select>
						</div>
						<div class="form-group">
							<label class="form-label">Transmission</label>
							<select class="form-select" id="transmission">
								<option value="automatic">Automatic</option>
								<option value="manual">Manual</option>
								<option value="cvt">CVT</option>
								<option value="semi-automatic">Semi-Automatic</option>
							</select>
						</div>
						<div class="form-group">
							<label class="form-label">Seats</label>
							<input type="number" class="form-control" id="seats" min="2" max="9" placeholder="5">
						</div>
						<div class="form-group">
							<label class="form-label">Color</label>
							<input type="text" class="form-control" id="carColor" placeholder="e.g., Midnight Black">
						</div>
						<div class="form-group">
							<label class="form-label">Mileage</label>
							<input type="text" class="form-control" id="mileage" placeholder="e.g., 25,000 km">
						</div>
						<div class="form-group">
							<label class="form-label">License Plate</label>
							<input type="text" class="form-control" id="licensePlate" placeholder="ABC-1234">
						</div>
					</div>
				</div>

				<!-- Features -->
				<div class="form-section">
					<h3 class="section-title">‚ú® Features</h3>
					<div class="checkbox-group">
						<div class="checkbox-item">
							<input type="checkbox" id="gps" name="features" value="GPS Navigation">
							<label for="gps">GPS Navigation</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="leather" name="features" value="Leather Seats">
							<label for="leather">Leather Seats</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="sunroof" name="features" value="Sunroof">
							<label for="sunroof">Sunroof</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="bluetooth" name="features" value="Bluetooth">
							<label for="bluetooth">Bluetooth</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="backup" name="features" value="Backup Camera">
							<label for="backup">Backup Camera</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="awd" name="features" value="All-Wheel Drive">
							<label for="awd">All-Wheel Drive</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="heated" name="features" value="Heated Seats">
							<label for="heated">Heated Seats</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="premium" name="features" value="Premium Sound">
							<label for="premium">Premium Sound System</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="keyless" name="features" value="Keyless Entry">
							<label for="keyless">Keyless Entry</label>
						</div>
						<div class="checkbox-item">
							<input type="checkbox" id="cruise" name="features" value="Cruise Control">
							<label for="cruise">Cruise Control</label>
						</div>
					</div>
				</div>

				<!-- Car Images -->
				<div class="form-section">
					<h3 class="section-title">üì∑ Car Images</h3>
					<div class="upload-zone" id="imageUpload">
						<div class="upload-icon">üñºÔ∏è</div>
						<h4>Upload car images</h4>
						<p>Drop multiple images here or click to select</p>
						<input type="file" class="file-input" id="carImages" multiple accept="image/*" />
					</div>
					<div class="preview-container" id="imagePreview"></div>
				</div>

				<!-- Insurance & Documents -->
				<div class="form-section">
					<h3 class="section-title">üìã Insurance & Documents</h3>
					<div class="upload-zone" id="documentsUpload">
						<div class="upload-icon">üìÅ</div>
						<h4>Upload insurance and related documents</h4>
						<p>Insurance papers, registration, maintenance records, etc.</p>
						<input type="file" class="file-input" id="carDocuments" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" />
					</div>
					<div class="preview-container" id="documentsPreview"></div>
				</div>

				<!-- Submit Button -->
				<div style="text-align: center; margin-top: 30px;">
					<button type="submit" class="btn success" style="font-size: 18px; padding: 15px 40px;">
						üöó Add Car to Fleet
					</button>
				</div>
			</form>

			<!-- Success Message -->
			<div class="success-message" id="successMessage">
				<h3>üéâ Car Successfully Added!</h3>
				<p>The new car has been added to your fleet and is now available for rental.</p>
				<button class="btn" onclick="window.location.href='main.html'" style="background: rgba(255,255,255,0.2); margin-top: 10px;">
					View Fleet
				</button>
			</div>
		</main>

		<script>
			// File upload handlers
			let uploadedImages = [];
			let uploadedDocuments = [];

			// Image upload handling
			const imageUpload = document.getElementById('imageUpload');
			const imageInput = document.getElementById('carImages');
			const imagePreview = document.getElementById('imagePreview');

			imageInput.addEventListener('change', handleImageUpload);
			imageUpload.addEventListener('dragover', handleDragOver);
			imageUpload.addEventListener('drop', handleImageDrop);

			function handleImageUpload(e) {
				const files = Array.from(e.target.files);
				processImageFiles(files);
			}

			function handleImageDrop(e) {
				e.preventDefault();
				imageUpload.classList.remove('dragover');
				const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
				processImageFiles(files);
			}

			function processImageFiles(files) {
				files.forEach(file => {
					if (uploadedImages.length < 10) { // Limit to 10 images
						uploadedImages.push(file);
						const reader = new FileReader();
						reader.onload = function(e) {
							addImagePreview(file.name, e.target.result, uploadedImages.length - 1);
						};
						reader.readAsDataURL(file);
					}
				});
			}

			function addImagePreview(name, src, index) {
				const previewItem = document.createElement('div');
				previewItem.className = 'preview-item';
				previewItem.innerHTML = `
					<img src="${src}" alt="${name}" class="preview-image">
					<button type="button" class="preview-remove" onclick="removeImage(${index})">√ó</button>
				`;
				imagePreview.appendChild(previewItem);
			}

			function removeImage(index) {
				uploadedImages.splice(index, 1);
				imagePreview.innerHTML = '';
				uploadedImages.forEach((file, i) => {
					const reader = new FileReader();
					reader.onload = function(e) {
						addImagePreview(file.name, e.target.result, i);
					};
					reader.readAsDataURL(file);
				});
			}

			// Documents upload handling
			const documentsUpload = document.getElementById('documentsUpload');
			const documentsInput = document.getElementById('carDocuments');
			const documentsPreview = document.getElementById('documentsPreview');

			documentsInput.addEventListener('change', handleDocumentsUpload);
			documentsUpload.addEventListener('dragover', handleDragOver);
			documentsUpload.addEventListener('drop', handleDocumentsDrop);

			function handleDocumentsUpload(e) {
				const files = Array.from(e.target.files);
				processDocumentFiles(files);
			}

			function handleDocumentsDrop(e) {
				e.preventDefault();
				documentsUpload.classList.remove('dragover');
				const files = Array.from(e.dataTransfer.files);
				processDocumentFiles(files);
			}

			function processDocumentFiles(files) {
				files.forEach(file => {
					uploadedDocuments.push(file);
					addDocumentPreview(file.name, file.type, uploadedDocuments.length - 1);
				});
			}

			function addDocumentPreview(name, type, index) {
				const previewItem = document.createElement('div');
				previewItem.className = 'preview-item';
				const icon = getFileIcon(type);
				previewItem.innerHTML = `
					<div class="preview-file">
						<div style="font-size: 24px; margin-bottom: 8px;">${icon}</div>
						<div style="font-size: 12px; word-break: break-all;">${name}</div>
					</div>
					<button type="button" class="preview-remove" onclick="removeDocument(${index})">√ó</button>
				`;
				documentsPreview.appendChild(previewItem);
			}

			function removeDocument(index) {
				uploadedDocuments.splice(index, 1);
				documentsPreview.innerHTML = '';
				uploadedDocuments.forEach((file, i) => {
					addDocumentPreview(file.name, file.type, i);
				});
			}

			function getFileIcon(type) {
				if (type.includes('pdf')) return 'üìÑ';
				if (type.includes('word') || type.includes('doc')) return 'üìù';
				if (type.includes('image')) return 'üñºÔ∏è';
				return 'üìÅ';
			}

			// Exotic PDF upload
			const exoticUpload = document.getElementById('exoticUpload');
			const exoticInput = document.getElementById('exoticFile');
			const aiProcess = document.getElementById('aiProcess');

			exoticInput.addEventListener('change', handleExoticUpload);

			function handleExoticUpload(e) {
				const file = e.target.files[0];
				if (file && file.type === 'application/pdf') {
					aiProcess.style.display = 'block';
					
					// Simulate AI processing
					setTimeout(() => {
						alert('AI processing complete! Car details have been extracted and pre-filled in the form below.');
						aiProcess.style.display = 'none';
						
						// Pre-fill form with extracted data (simulated)
						document.getElementById('carName').value = 'Ferrari 488 GTB';
						document.getElementById('carModel').value = '2023 Ferrari 488 GTB';
						document.getElementById('carYear').value = '2023';
						document.getElementById('carType').value = 'luxury';
						document.getElementById('carPrice').value = '500';
						document.getElementById('fuelType').value = 'gasoline';
						document.getElementById('transmission').value = 'automatic';
						document.getElementById('seats').value = '2';
						document.getElementById('carColor').value = 'Rosso Corsa Red';
						
						// Check some features
						document.getElementById('leather').checked = true;
						document.getElementById('premium').checked = true;
						document.getElementById('cruise').checked = true;
						
						// Scroll to form
						document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
					}, 3000);
				}
			}

			// Drag and drop handlers
			function handleDragOver(e) {
				e.preventDefault();
				e.currentTarget.classList.add('dragover');
			}

			document.addEventListener('dragleave', (e) => {
				if (!e.currentTarget.contains(e.relatedTarget)) {
					document.querySelectorAll('.upload-zone').forEach(zone => {
						zone.classList.remove('dragover');
					});
				}
			});

			// Form submission
			document.getElementById('carForm').addEventListener('submit', function(e) {
				e.preventDefault();
				
				// Get selected features
				const features = Array.from(document.querySelectorAll('input[name="features"]:checked'))
					.map(checkbox => checkbox.value);

				// Simulate form submission
				const formData = {
					name: document.getElementById('carName').value,
					model: document.getElementById('carModel').value,
					year: document.getElementById('carYear').value,
					type: document.getElementById('carType').value,
					status: document.getElementById('carStatus').value,
					price: document.getElementById('carPrice').value,
					fuel: document.getElementById('fuelType').value,
					transmission: document.getElementById('transmission').value,
					seats: document.getElementById('seats').value,
					color: document.getElementById('carColor').value,
					mileage: document.getElementById('mileage').value,
					licensePlate: document.getElementById('licensePlate').value,
					features: features,
					images: uploadedImages.length,
					documents: uploadedDocuments.length
				};

				// Show success message
				document.getElementById('successMessage').style.display = 'block';
				document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
				
				// Reset form after 2 seconds
				setTimeout(() => {
					this.reset();
					uploadedImages = [];
					uploadedDocuments = [];
					imagePreview.innerHTML = '';
					documentsPreview.innerHTML = '';
				}, 2000);
			});

			// Initialize tooltips and form validation
			document.addEventListener('DOMContentLoaded', function() {
				// Add real-time validation
				const requiredFields = document.querySelectorAll('input[required], select[required]');
				requiredFields.forEach(field => {
					field.addEventListener('blur', validateField);
					field.addEventListener('input', validateField);
				});
			});

			function validateField(e) {
				const field = e.target;
				if (field.value.trim() === '') {
					field.style.borderColor = 'var(--danger)';
				} else {
					field.style.borderColor = 'var(--success)';
				}
			}
		</script>
	</body>
</html>
